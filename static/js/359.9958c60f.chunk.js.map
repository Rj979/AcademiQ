{"version":3,"file":"static/js/359.9958c60f.chunk.js","mappings":"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","sources":["Components/Forms/JoinPaper.js"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport axios from \"../../config/api/axios\";\nimport UserContext from \"../../Hooks/UserContext\";\nimport { TableHeader } from \"../Table\";\nimport Loading from \"../Layouts/Loading\";\nimport ErrorStrip from \"../ErrorStrip\";\n\nconst JoinPaper = () => {\n  const { user, setPaperList } = useContext(UserContext);\n  const [error, setError] = useState(\"\");\n  const [papers, setPapers] = useState([]);\n\n  useEffect(() => {\n    const getallPapers = async () => {\n      try {\n        const response = await axios.get(\"paper/manage/\" + user._id);\n        setPapers(response.data);\n      } catch (err) {\n        setError(err);\n      }\n    };\n    getallPapers();\n\n    const updatePapers = async () => {\n      const response = await axios.get(`paper/student/${user._id}`);\n      setPaperList(response.data);\n    };\n    // updating paperList while component unmounts\n    return () => updatePapers();\n  }, [user, setPaperList]);\n\n  const handleJoin = async (e) => {\n    const paperId = e.currentTarget.id;\n    const index = e.target.name;\n    const students = papers[index].students;\n    students.push(user._id);\n    updateStudents(paperId, students, index);\n  };\n\n  const handleLeave = async (e) => {\n    const paperId = e.currentTarget.id;\n    const index = e.target.name;\n    const students = papers[index].students;\n    const updatedStudents = students.filter((student) => student !== user._id);\n    updateStudents(paperId, updatedStudents, index);\n  };\n\n  const updateStudents = async (paperId, studentsObj, paperIndex) => {\n    setError(\"\");\n    try {\n      const response = await axios.patch(\"/paper/\" + paperId, {\n        students: studentsObj,\n        id: paperId,\n      });\n      toast.success(response.data.message);\n      const updatedPaper = papers.map((paper, index) => {\n        if (index === parseInt(paperIndex)) {\n          paper.joined = !paper.joined;\n          return paper;\n        } else return paper;\n      });\n      setPapers(updatedPaper);\n    } catch (err) {\n      setError(err);\n    }\n  };\n\n  return (\n    <>\n      {user.role === \"student\" ? (\n        <main>\n          <h2 className=\"mb-2 mt-3 whitespace-break-spaces text-4xl font-bold text-violet-950 underline decoration-inherit decoration-2 underline-offset-4 dark:mt-0 dark:text-slate-400 md:text-6xl\">\n            Manage Paper\n          </h2>\n          <form>\n            {papers.length ? (\n              <>\n                <div className=\"my-4 w-full overflow-auto rounded-md border-2 border-slate-900 dark:border-slate-500 dark:p-[1px]\">\n                  <table className=\"w-full text-left\">\n                    <TableHeader\n                      AdditionalRowClasses={\"rounded-t-xl text-left\"}\n                      AdditionalHeaderClasses={'last:text-center'}\n                      Headers={[\n                        \"Paper\",\n                        \"Department\",\n                        \"Year\",\n                        \"Semester\",\n                        \"Teacher\",\n                        \"Manage\",\n                      ]}\n                    />\n                    <tbody>\n                      {papers?.map((paper, index) => (\n                        <tr key={index}>\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\n                            {paper.paper}\n                          </td>\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\n                            {paper.department}\n                          </td>\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\n                            {paper.year}\n                          </td>\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\n                            {paper.semester}\n                          </td>\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 px-4 py-2\">\n                            {paper.teacher.name}\n                          </td>\n                          <td className=\"border-t-[1px] border-violet-400 dark:border-slate-400 p-0\">\n                            {!paper.joined ? (\n                              <button\n                                type=\"button\"\n                                id={paper._id}\n                                name={index}\n                                onClick={(e) => handleJoin(e)}\n                                className=\"m-0 flex h-auto w-full justify-center bg-transparent py-3  text-lg  hover:bg-violet-900 hover:text-slate-100 dark:text-slate-100 \"\n                              >\n                                Join\n                              </button>\n                            ) : (\n                              <button\n                                className=\"m-0 flex h-auto w-full justify-center bg-transparent py-3  text-lg  hover:bg-red-600 hover:text-slate-100 dark:text-slate-100 \"\n                                type=\"button\"\n                                id={paper._id}\n                                name={index}\n                                onClick={(e) => handleLeave(e)}\n                              >\n                                Leave\n                              </button>\n                            )}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </>\n            ) : (\n              <Loading />\n            )}\n          </form>\n          {error ? <ErrorStrip error={error} /> : \"\"}\n        </main>\n      ) : (\n        <Navigate to=\"/dash\" />\n      )}\n    </>\n  );\n};\n\nexport default JoinPaper;\n"],"names":["JoinPaper","user","setPaperList","useContext","UserContext","error","setError","useState","papers","setPapers","useEffect","async","response","axios","get","_id","data","err","getallPapers","concat","updatePapers","updateStudents","paperId","studentsObj","paperIndex","patch","students","id","toast","success","message","updatedPaper","map","paper","index","parseInt","joined","_jsx","_Fragment","children","role","_jsxs","className","length","TableHeader","AdditionalRowClasses","AdditionalHeaderClasses","Headers","department","year","semester","teacher","name","type","onClick","e","currentTarget","target","updatedStudents","filter","student","handleLeave","push","handleJoin","Loading","ErrorStrip","Navigate","to"],"sourceRoot":""}